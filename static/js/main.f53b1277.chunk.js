(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,a){e.exports=a.p+"static/media/hamb.0a1b1c06.svg"},22:function(e,t,a){e.exports=a(38)},31:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(12),c=a.n(r),i=a(1),l=a(10),o=a(9),d=a(7),u="LOAD_TASKS",k="LOAD_DESKS",p="ADD_TASK",h="ADD_DESK",m="REMOVE_TASK",f="REMOVE_DESK",v="SET_DESK_ID",b="SET_DESK_COLOR";var E={tasks:[]},g={desks:[]};var O=Object(l.b)({tasks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(d.a)({},e,{tasks:t.tasks});case p:var a=e.tasks.map(function(e){return e.id}),n=e.tasks.length?Math.max.apply(Math,Object(o.a)(a))+1:0;return Object(d.a)({},e,{tasks:[{id:n,status:+t.task.deskId,title:t.task.title,description:t.task.description}].concat(Object(o.a)(e.tasks))});case m:return Object(d.a)({},e,{tasks:e.tasks.filter(function(e){return e.id!==+t.id})});case v:var s,r=Object(o.a)(e.tasks),c=r.length;r.forEach(function(e,a){e.id===t.taskId&&(e.status=t.deskId,s=a),e.id===t.closestTaskId&&(c=a)});var i=r.splice(s,1)[0];return console.log(c),r.splice(c,0,i),Object(d.a)({},e,{tasks:r});default:return e}},desks:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(d.a)({},e,{desks:t.desks});case h:var a=e.desks.map(function(e){return e.id}),n=e.desks.length?Math.max.apply(Math,Object(o.a)(a))+1:0;return Object(d.a)({},e,{desks:[].concat(Object(o.a)(e.desks),[{id:n,title:t.desk.title,color:"#b3caaf"}])});case f:return Object(d.a)({},e,{desks:e.desks.filter(function(e){return e.id!==+t.id})});case b:var s=Object(o.a)(e.desks);return s.forEach(function(e){e.id===t.deskId&&(e.color=t.color)}),Object(d.a)({},e,{desks:s});default:return e}}}),j=Object(l.c)(O),C=a(2),y=a(3),D=a(6),S=a(4),_=a(5),I=a(14),A=(a(31),function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(D.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(s)))).state={active:!1,title:"",text:"",deskId:0},a.handleClick=function(){a.setState({active:!a.state.active,title:"",text:"",deskId:a.props.desks.length?a.props.desks[0].id:0})},a.handleChange=function(e){var t=e.target.name;a.setState(Object(I.a)({},t,e.target.value))},a.handleSelectChange=function(e){console.log(e.target.value),a.setState({deskId:+e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.addTask({title:a.state.title,description:a.state.text,deskId:a.state.deskId}),a.setState({active:!1,title:"",text:"",deskId:a.props.desks.length?a.props.desks[0].id:0})},a}return Object(_.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props.desks.map(function(e){return s.a.createElement("option",{key:e.id,value:e.id},e.title)});return s.a.createElement("div",{className:"add_form"},this.state.active||s.a.createElement("a",{href:"#",onClick:this.handleClick},"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043a\u0430\u0440\u0442\u043e\u0447\u043a\u0443"),this.state.active&&s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("p",null,s.a.createElement("input",{type:"text",value:this.state.value,onChange:this.handleChange,name:"title",className:"task_title",placeholder:"\u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a"})),s.a.createElement("p",null,s.a.createElement("textarea",{value:this.state.value,onChange:this.handleChange,name:"text",className:"task_description",placeholder:"\u043e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0437\u0430\u0434\u0430\u0447\u0438"})),s.a.createElement("div",{className:"select_desk"},this.props.desks.length?s.a.createElement("select",{onChange:this.handleSelectChange},e):"\u0432\u0441\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u044b\u0435 \u0437\u0430\u0434\u0430\u0447\u0438 \u043f\u043e\u044f\u0432\u044f\u0442\u0441\u044f \u043d\u0430 \u043f\u0435\u0440\u0432\u043e\u0439 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043d\u043e\u0439 \u0434\u043e\u0441\u043a\u0435"),s.a.createElement("div",{className:"buttons_block"},s.a.createElement("input",{type:"submit",value:"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c",className:"buttons submit"}),s.a.createElement("button",{onClick:this.handleClick,className:"buttons cancel"},"\u043e\u0442\u043c\u0435\u043d\u0430"))))}}]),t}(s.a.Component)),N=Object(i.b)(function(e){return{tasks:e.tasks}},function(e){return{addTask:function(t){return e(function(e){return{type:p,task:e}}(t))}}})(A),w=(a(32),function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(D.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(s)))).state={active:!1,title:""},a.handleClick=function(){a.setState({active:!a.state.active,title:""})},a.handleChange=function(e){a.setState({title:e.target.value})},a.handleSubmit=function(e){e.preventDefault(),a.props.addDesk({title:a.state.title}),a.setState({active:!1,title:""})},a}return Object(_.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"add_form_desk"},this.state.active?s.a.createElement("a",{href:"#",onClick:this.handleClick},"\u043e\u0442\u043c\u0435\u043d\u0430"):s.a.createElement("a",{href:"#",onClick:this.handleClick},"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0441\u043a\u0443"),this.state.active&&s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("input",{type:"text",value:this.state.title,onChange:this.handleChange,name:"desk",placeholder:"\u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u0434\u043e\u0441\u043a\u0438"})))}}]),t}(s.a.Component)),T=Object(i.b)(null,function(e){return{addDesk:function(t){return e({type:h,desk:t})}}})(w),x=(a(33),function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(D.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(s)))).handleClick=function(e){a.props.removeTask(e.target.id)},a}return Object(_.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=Object(d.a)({},this.props.task),t=e.title,a=e.description,n=e.id;return s.a.createElement("div",{className:"task",draggable:"true",id:n},s.a.createElement("div",{className:"wrap"},s.a.createElement("div",{className:"title"},t),s.a.createElement("div",{className:"remove_task"},s.a.createElement("a",{href:"#",id:n,onClick:this.handleClick},"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"))),a?s.a.createElement("div",{className:"description"},s.a.createElement("div",{className:"description_wrap"},a)):"")}}]),t}(s.a.Component)),K=Object(i.b)(null,function(e){return{removeTask:function(t){return e({type:m,id:t})}}})(x),M=(a(34),function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(D.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(s)))).state={active:!1,color:""},a.handleClick=function(){a.setState({active:!a.state.active})},a.changeColor=function(e){return function(){a.props.setColor(+a.props.deskId,e)}},a.colors=["#e1f3de","#b3caaf","#e6d6ac","#98ebcf","#dfeea8","#728fa7","#dde7f0","#483D8B","#A52A2A","#FFC0CB","#4682B4","#46AFAF","#F0E68C","#FA5858"],a}return Object(_.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this,t=this.colors.map(function(t,a){return s.a.createElement("div",{key:a,className:"color_item",style:{background:t,cursor:"pointer"},onClick:e.changeColor(t)})});return s.a.createElement("div",{className:"color_panel"},this.state.active?s.a.createElement("a",{href:"#",onClick:this.handleClick}):s.a.createElement("a",{href:"#",onClick:this.handleClick},"\u043d\u0430\u0441\u0442\u0440\u043e\u0438\u0442\u044c \u0446\u0432\u0435\u0442"),this.state.active&&s.a.createElement("div",{className:"colors"},t))}}]),t}(s.a.Component)),F=Object(i.b)(null,function(e){return{setColor:function(t,a){return e(function(e,t){return{type:b,deskId:e,color:t}}(t,a))}}})(M),L=(a(35),a(21)),R=a.n(L),B=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(D.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(s)))).state={tuneActive:!1},a.handleTuneClick=function(){a.setState({tuneActive:!a.state.tuneActive})},a.handleRemoveClick=function(e){a.props.removeDesk(e.target.id)},a.handleDeskClick=function(){a.setState({tuneActive:!1})},a}return Object(_.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){var e=this.props.tasks.map(function(e){return s.a.createElement(K,{key:e.id,task:e})});return s.a.createElement("div",{className:"desk",id:this.props.deskId,style:{background:this.props.color}},s.a.createElement("div",{className:"tune_desk"},s.a.createElement("img",{src:R.a,onClick:this.handleTuneClick,style:{cursor:"pointer"}}),this.state.tuneActive&&s.a.createElement("div",{className:"tune_panel"},s.a.createElement(F,{deskId:this.props.deskId}),s.a.createElement("div",{className:"remove_task"},!e.length&&s.a.createElement("a",{href:"#",id:this.props.deskId,onClick:this.handleRemoveClick},"\u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0434\u043e\u0441\u043a\u0443")))),s.a.createElement("div",{className:"wrap_tasks",onClick:this.handleDeskClick},s.a.createElement("div",{className:"desk_title"},s.a.createElement("b",null,this.props.title)),e))}}]),t}(s.a.Component),J=Object(i.b)(null,function(e){return{removeDesk:function(t){return e({type:f,id:t})}}})(B);a(36);function V(e,t){fetch(e).then(function(e){return e.json()}).then(function(e){return t(e)})}var U=function(e){function t(){return Object(C.a)(this,t),Object(D.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(_.a)(t,e),Object(y.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("todo_19811210vs"));e?(this.props.loadDesks(e.desks),this.props.loadTasks(e.tasks)):(V("tasks.json",this.props.loadTasks),V("desks.json",this.props.loadDesks))}},{key:"componentDidUpdate",value:function(){localStorage.setItem("todo_19811210vs",JSON.stringify({tasks:this.props.tasks,desks:this.props.desks}))}},{key:"render",value:function(){var e=this,t=this.props.desks.map(function(t){return s.a.createElement(J,{key:t.id,title:t.title,deskId:t.id,color:t.color,tasks:e.props.tasks.filter(function(e){return e.status===t.id})})});return s.a.createElement("div",{id:"App"},s.a.createElement("div",{id:"header"},s.a.createElement(N,{desks:this.props.desks})),s.a.createElement("div",{id:"content"},t,s.a.createElement(T,null)))}}]),t}(s.a.Component),q=Object(i.b)(function(e){return{tasks:e.tasks.tasks,desks:e.desks.desks}},function(e){return{loadTasks:function(t){return e({type:u,tasks:t})},loadDesks:function(t){return e({type:k,desks:t})}}})(U),z=function(e){function t(){var e,a;Object(C.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(D.a)(this,(e=Object(S.a)(t)).call.apply(e,[this].concat(s)))).dragElement=null,a.dropElement=null,a.closestElement=null,a.dragStart=function(e){a.dragElement=e.target},a.drag=function(e){e.target.style.opacity=0},a.dragEnd=function(e){e.target.style.opacity=1},a.dragOver=function(e){a.dropElement=e.target.closest(".desk"),a.dropElement&&e.preventDefault()},a.dragEnter=function(e){},a.dragLeave=function(e){},a.drop=function(e){e.preventDefault();var t=e.target.closest(".task");t?a.props.setDeskId(+a.dragElement.id,+a.dropElement.id,+t.id):a.props.setDeskId(+a.dragElement.id,+a.dropElement.id)},a}return Object(_.a)(t,e),Object(y.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{id:"dnd_wrap",onDragStart:this.dragStart,onDrag:this.drag,onDragEnd:this.dragEnd,onDragOver:this.dragOver,onDragEnter:this.dragEnter,onDragLeave:this.dragLeave,onDrop:this.drop},this.props.children)}}]),t}(s.a.Component),G=Object(i.b)(null,function(e){return{setDeskId:function(t,a,n){return e(function(e,t,a){return{type:v,taskId:e,deskId:t,closestTaskId:a}}(t,a,n))}}})(z);a(37);c.a.render(s.a.createElement(i.a,{store:j},s.a.createElement(G,null,s.a.createElement(q,null))),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.f53b1277.chunk.js.map